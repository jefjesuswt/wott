<div class="icons">
  <div class="search-container">
    <a routerLink="/" class="home-button" aria-label="Go to homepage"> <icons-home-icon /> </a>

    <div class="search-input-wriconser">
      <div class="search-icon">
        <icons-search-icon />
      </div>

      <input
        [value]="searchQuery()"
        (input)="handleSearch($event)"
        (keydown.down.prevent)="navigateResults('down')"
        (keydown.up.prevent)="navigateResults('up')"
        (keydown.enter)="selectHighlightedVideo()"
        placeholder="Search videos..."
        class="search-input"
      />

      @if (searchQuery() && !isLoading()) {
      <div class="clear-search" (click)="clearSearch()">Ã—</div>
      } @if (isLoading()) {
      <div class="loader"></div>
      }
    </div>

    <button
      class="settings-button"
      (click)="showSettingsDialog.set(true)"
      aria-label="Open settings"
    >
      <icons-settings-icon />
    </button>

    @if (searchResults().length > 0) {
    <div class="search-results">
      @for (result of searchResults(); track result.id; let i = $index) {
      <div
        class="search-result-item"
        [class.highlighted]="i === highlightedIndex()"
        (click)="selectVideo(result.id)"
        (mouseenter)="highlightedIndex.set(i)"
      ></div>
      }
    </div>
    } @else if (searchQuery() && !isLoading()) {
    <div class="empty-results">
      <icons-sad-face-icon />
      <p>No videos found. Try a different search term.</p>
    </div>
    }
  </div>

  <div class="main-content">
    <router-outlet />
  </div>

  <app-toast-notification />

  @if (showSettingsDialog()) {
  <app-settings-dialog (close)="showSettingsDialog.set(false)" (save)="saveSettings($event)" />
  }
</div>
